<!DOCTYPE html>
<html>
<head>
  <title>ë””ë²„ê·¸ ì •ë³´</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #0f0; }
    pre { background: #000; padding: 10px; border: 1px solid #0f0; }
    button { padding: 10px 20px; margin: 10px 0; cursor: pointer; font-size: 16px; }
  </style>
</head>
<body>
  <h1>ğŸ” ë””ë²„ê·¸ ì •ë³´</h1>
  <button onclick="checkState()">í˜„ì¬ ìƒíƒœ í™•ì¸</button>
  <button onclick="clearAll()">ëª¨ë“  ìºì‹œ ì‚­ì œ</button>
  <button onclick="location.reload(true)">ê°•ì œ ë¦¬ë¡œë“œ</button>
  <pre id="output">ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”...</pre>

  <script type="module">
    window.checkState = async () => {
      const output = document.getElementById('output');
      let info = '=== ë””ë²„ê·¸ ì •ë³´ ===\n\n';
      
      try {
        // ì´ˆê¸° ìƒíƒœ í™•ì¸
        const { createInitialState } = await import('/src/state/useGameState.js');
        const initialState = createInitialState();
        info += 'ì´ˆê¸° ì—í…Œë¥´ ê°’: ' + initialState.resources.aether + '\n';
        info += 'ì´ˆê¸° ìƒíƒœ: ' + JSON.stringify(initialState.resources, null, 2) + '\n\n';
        
        // ê²Œì„ ìŠ¤í† ì–´ í™•ì¸
        const { useGameStore } = await import('/src/state/gameStore.js');
        const state = useGameStore.getState();
        info += 'í˜„ì¬ ì—í…Œë¥´ ê°’: ' + state.resources.aether + '\n';
        info += 'í˜„ì¬ ë¦¬ì†ŒìŠ¤: ' + JSON.stringify(state.resources, null, 2) + '\n\n';
        
        // ìºì‹œ í™•ì¸
        info += '=== ìºì‹œ ìƒíƒœ ===\n';
        info += 'localStorage í•­ëª©: ' + localStorage.length + '\n';
        info += 'sessionStorage í•­ëª©: ' + sessionStorage.length + '\n';
        
        if ('caches' in window) {
          const cacheNames = await caches.keys();
          info += 'Cache API: ' + cacheNames.length + ' caches\n';
          info += 'Cache names: ' + JSON.stringify(cacheNames, null, 2) + '\n';
        }
        
      } catch (error) {
        info += '\nâŒ ì˜¤ë¥˜: ' + error.message + '\n';
        info += error.stack;
      }
      
      output.textContent = info;
    };
    
    window.clearAll = () => {
      localStorage.clear();
      sessionStorage.clear();
      if ('caches' in window) {
        caches.keys().then(names => {
          names.forEach(name => caches.delete(name));
          alert('ëª¨ë“  ìºì‹œ ì‚­ì œë¨! í˜ì´ì§€ë¥¼ ë¦¬ë¡œë“œí•©ë‹ˆë‹¤.');
          location.href = '/';
        });
      } else {
        alert('ëª¨ë“  ìŠ¤í† ë¦¬ì§€ ì‚­ì œë¨! í˜ì´ì§€ë¥¼ ë¦¬ë¡œë“œí•©ë‹ˆë‹¤.');
        location.href = '/';
      }
    };
  </script>
</body>
</html>
